凡例：＋追加 －変更 ×削除 ↑バグ修正

記録以前
  記帳風月からのインポート
  帳簿項目追加、編集
  合計項目表示
2016/12/29
  MainWindow.xaml.cs
    ＋削除時に移動も削除されるようにした(2017/01/01確認)
    ↑移動操作可能の判定が「帳簿」ではなく「帳簿項目」になっていたのを修正
    ↑項目編集処理のグループ種別判定処理のSQLを修正
    ↑NumericUpDown.ValueのModeをTwoWayに修正 - Editしたテキストが取得できなかったため
    ↑NumericUpDown内のTextBoxのUpdateSourceTriggerをPropertyChangedに修正 - Editしたテキストが取得できなかったため
  ActionRegistrationWindow.xaml.cs
    ↑登録完了時にDialogResult=trueとなるように修正
    ↑グループ内帳簿項目洗い出し時に日付昇順になるように修正
    ↑「店舗」、「備考」のBind先をSelectedItemsからTextに変更(合わせてUpdateSourceTriggerをPropertyChangedに修正) - Editしたテキストが取得できなかったため
    ＋グループに属する項目が1つになったときにグループを削除するようにした
  その他
    －hst_remark.used_timeの型をtime with time zone→timestamp without time zoneに修正
2016/12/30
  ActionRegistrationWindow.xaml.cs
    ＋「店舗」、「備考」の最終使用時刻の更新、レコードの追加が行われるようにした
    －「店舗」、「備考」の表示順序を降順に変更
    －「店舗」、「備考」欄の記載が、収支、カテゴリや項目を変更しても変わらないように変更
2016/12/31
  MoveRegistrationWindow.xaml.cs
    ＋「移動」の表示(追加、編集)ができるようにした
2017/01/01
  MainWindow.xaml.cs
    ↑手数料を含む移動の場合に、記帳風月からの取込時に繰り返しと見做されていたのを修正
  MoveRegistrationWindow.xaml.cs
    ＋「移動」の追加、編集ができるようにした
2017/01/02
  MainWindow.xaml.cs
    ＋表示データごとにタブ化した
    ＋タブの選択をメニューから行えるようにした
2017/01/08
  App.xaml.cs
    ＋DB接続できない場合にソフトを終了するようにした
    ＋DBのバックアップを10件まで保存するようにした
  MainWindow.xaml.cs
    ＋ウィンドウサイズ、位置を保存するようにした
    ＋年間一覧が表示されるようにした
    ＋年間一覧の表示年度と帳簿の表示月が連動するようにした
    ＋終了時に選択していた帳簿を保存するようにした
  ActionRegistrationWindow.xaml.cs
    ＋ウィンドウサイズ、位置を保存するようにした
  MoveRegistrationWindow.xaml.cs
    ＋ウィンドウサイズ、位置を保存するようにした
2017/01/14
  App.xaml.cs
    －バックアップをソフト起動時ではなく終了時に行うようにした
2017/01/15
  NumericUpDown.xaml.cs
    ＋テキストボックスフォーカス時、数値入力用ウィンドウを表示するようにした
  ActionRegistrationWindow.xaml.cs
    －金額登録で未入力を初期値にした
    ＋追加時、Enterキー入力で「続けて入力」、Shift+Enterキー入力で「登録」するようにした
    ＋編集時、Enterキー入力で「登録」するようにした
  MoveRegistrationWindow.xaml.cs
    －金額登録で未入力を初期値にした
    ＋Enterキー入力で「登録」するようにした
2017/01/21
  MainWindow.xaml.cs
    ＋帳簿項目追加/変更時及び移動追加/変更時、画面更新をコールバックで実行するように変更した
  ActionRegistrationWindow.xaml.cs
    ＋帳簿項目追加/変更時に、ウィンドウを閉じる場合でも登録時イベントを呼ぶように変更した
    ＋登録時イベントで追加/変更した帳簿項目IDを渡すようにした
  MoveRegistrationWindow.xaml.cs
    ＋移動追加/変更時に、ウィンドウを閉じる場合でも登録時イベントを呼ぶように変更した
    ＋登録時イベントで追加/変更した帳簿項目IDを渡すようにした
2017/01/22
  MainWindow.xaml.cs
    ＋コンストラクタで設定を読み込むように変更した
    ＋カスタム形式ファイルへのエクスポートができるようにした
    ＋カスタム形式ファイルからのインポートができるようにした
  ActionRegistrationWindow.xaml.cs
    ＋コンストラクタで設定を読み込むように変更した
  MoveRegistrationWindow.xaml.cs
    ＋コンストラクタで設定を読み込むように変更した
2017/02/03
  App.xaml.cs
    ＋DB設定を初回起動時/接続失敗時に指定できるようにした
2017/02/04
  MainWindow.xaml.cs
    ＋帳簿項目を登録、追加したときに、DataGridViewにフォーカスを当てるように変更した
    ＋年間一覧の平均値の算出方法を修正した(12ヶ月→開始月から先月まで)
    ＋帳簿項目をまとめて登録できるようにした
  ActionListRegistrationWindow.xaml.cs
    ＋帳簿項目をまとめて登録できるようにした
2017/02/05
  全般
    －ViewModelを別ファイルにした
    －usingの整理をした
  App.xaml.cs
    －デバッグビルド時、接続するDBをデバッグ用に変更した
    －バックアップファイルの形式をカスタム形式に変更した
  MainWindow.xaml.cs
    －デバッグビルド時、接続するDBをデバッグ用に変更した
  DbSettingWindow.xaml.cs
    －デバッグビルド時、接続するDBをデバッグ用に変更した
2017/02/07
  MoveRegistrationWindow.xaml.cs
    ↑手数料が空文字のときに例外が発生していたのを修正した
2017/02/11
  全般
    ＋Extended WPF Toolkitを追加
  NumberInputWindow.xaml.cs
    ＋表示時にテンキー/数字キーで入力できるようにした
  MainWindow.xaml.cs
    ↑今年度以降の年間一覧の表示時にゼロ割例外が発生していたのを修正した
2017/02/12
  全般
    ＋Extended WPF Toolkitを削除
  App.xaml.cs
    －デバッグビルドでバックアップファイルを作成しないように変更した
  NumericUpDown.xaml.cs
    －マウスでの数字の入力をPopupコントロールに変更した(NumberInputWindowからマージ)
  NumberInputWindow.xaml.cs
    ×ウィンドウを削除した
  DateTimePicker.cs
    ＋DatePickerからForms.DateTimePickerに似た挙動になるように作成した
  ActionRegistrationWindow.xaml.cs
    －DatePickerをDateTimePickerに変更した
  ActionListRegistrationWindow.xaml.cs
    －日付表示の列幅を設定した
    －DatePickerをDateTimePickerに変更した
  MoveRegistrationWindow.xaml.cs
    －DatePickerをDateTimePickerに変更した
2017/02/18
  全般
    ＋アセンブリバージョン番号をビルド時に更新されるようにした
    ＋設定項目がバージョンによって異なる場合にUpgradeに対応できるようにした
    －設定読み込み、保存時のコードを修正した
  DateTimePicker.cs
    －上下のキー操作を入れ替えた(NumericUpDownと操作が異なっていたため)
  App.xaml.cs
    ↑pg_dump.exeが登録されていないときにバックアップを作成しようとしていたのを修正した
    ↑バックアップフォルダが指定されていないときにバックアップを実行ファイルと同フォルダに作成していたのを作成しないように修正した
    ↑バックアップファイル数が0以下のときにバックアップを作成していたのを修正した
    ＋バックアップの作成中に処理中ウィンドウを表示するようにした
  MainWindow.xaml.cs
    ↑pg_dump.exeが登録されていないときにカスタム形式ファイルのエクスポートを無効にするように修正した
    ↑pg_restore.exeが登録されていないときにカスタム形式ファイルのインポートを無効にするように修正した
2017/02/19
  MainWindow.xaml.cs
    ↑年間一覧タブで、残高の平均値が表示されていたのを修正した
    －DataGridの背景色の指定をコードビハインドからXamlに移動した
    ＋DataGridの土日表記に文字色を付与した
  NumericUpDown.xaml.cs
    ↑IME=ON時、数値以外を入力できていたので、編集時IMEをOFFにするように修正した
    －空文字時、▲/▼ボタンでNullValueが入力されていたのを、Min/MaxValueが入力されるように修正した
    －空文字時、↑/↓キーでNullValueが入力されていたのを、Min/MaxValueが入力されるように修正した
  DateTimePicker.cs
    ＋編集時IMEをOFFにするようにした
    ＋カレンダーを開く前後でテキストボックス内の選択位置が維持されるようにした
2017/02/25
  MainWindow.xaml.cs
    －帳簿タブの日付曜日が横スクロール時に固定されるように変更した
    －年間一覧タブの項目名が横スクロール時に固定されるように変更した
2017/02/26
  DaoReader.cs
    ↑指定するフィールド名が大文字のときに例外が発生していたのを修正した
  MainWindow.xaml.cs
    ＋設定タブでマスタ及びリレーション関係のテーブルの情報を表示するようにした
2017/02/28
  MainWindow.xaml.cs
    ↑年間一覧タブで帳簿の名称が表示されないのを修正した
2017/03/04
  NumericUpDown.xaml.cs
    ＋マウスホイールで数値の増減ができるようにした
  DateTimePicker.cs
    ＋マウスホイールで選択している数値の増減ができるようにした
    －初期状態として日が選択されるように変更した
  OnBackUpWindow.xaml
    －ウィンドウサイズと調整と透過率の設定
  ActionRegistrationWindow.xaml.cs
    ＋今日を選択するボタンを追加した
    －日付、金額、回数の入力内容が即座にCanExecute判定に反映されるように変更した
  ActionListRegostrationWindow.xaml.cs
    ↑金額が入力されていない項目があっても登録ボタンが押せていたのを修正した
    －金額の入力内容が即座にCanExecute判定に反映されるように変更した
  MoveRegistrationWindow.xaml.cs
    ＋今日を選択するボタンを追加した
    ↑金額が0でも登録ボタンが押せていたのを修正した
    －日付、金額の入力内容が即座にCanExecute判定に反映されるように変更した
  MainWindow.xaml.cs
    ＋設定項目のCanExecute判定を実装した
2017/03/11
  ActionRegistrationWindow.xaml.cs
    ↑店舗、備考欄で、使用日時をより古い日時で更新することがあるのを修正した
  ActionRegistrationWindow.xaml.cs
    ↑店舗、備考欄で、使用日時をより古い日時で更新することがあるのを修正した
  ActionRegistrationWindow.xaml.cs
    ↑備考欄で、使用日時をより古い日時で更新することがあるのを修正した
  MainWindow.xaml.cs
    －帳簿タブで、月変更時、今月であれば、スクロール位置を一番下にするようにした
    －帳簿タブで、月変更時、今月でなければ、スクロール位置を一番上にするようにした
    ↑年間一覧タブ表示時にバックグラウンドでBindingExceptionが多発していたのを修正した
    ＋設定タブで、選択した項目の店舗及び備考を一覧表示できるようにした
    ＋設定タブで、選択した店舗または備考を削除できるようにした
    ×設定タブから登録/キャンセルボタンを削除した
    －ツール->設定メニューを有効に変更した
    ×設定タブ内の店舗備考設定タブを削除した
    －今月、今年が表示されているときに今月、今年ボタンを無効化するようにした
    －設定タブで、項目選択時に、店舗及び備考のスクロール位置を一番上にするようにした
2017/03/13
  全般
    ＋アイコンを設定した(http://icon-rainbow.com/%E3%83%AC%E3%82%B7%E3%83%BC%E3%83%88%E3%81%AE%E7%84%A1%E6%96%99%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3%E7%B4%A0%E6%9D%90/)
2017/03/18
  全般
    ＋SetProperty関数を使用してプロパティの変更を通知するようにした
    －各種Nuget Packagesを更新した
  MainWindow.xaml.cs
    ↑表示時にバックグラウンドでBindingExceptionが多発していたのを修正した
    －設定タブ用のメンバ、関数をpartialで分割した
    －設定タブ内のタブの更新タイミングをタブが選択された時に変更した
    ＋帳簿設定タブでの帳簿の追加、削除、順序変更を実装した(ただし削除は所属する帳簿項目がないときに限る)
2017/03/19
  全般
    －多重起動を抑止するようにした
    －String, Objectをstring, objectに揃えた
  NumericUpDown.xaml.cs
    －キー入力制御をInputBindingsで処理するようにした
  DbSettingWindow.xaml.cs
    ＋キーボードショートカットを追加した
  MainWindow.xaml.cs
    －キー入力制御をInputBindingsで処理するようにした
    ＋キーボードショートカットを追加した
    ↑メニューからのタブの切替操作時に、タブが切り替わらないのを修正した
    －終了時の画面ステータスを保存するようにした
    －一部デザインを変更した
    ↑移動の新規登録時、手数料にグループIDが付与されないのを修正した
    －設定タブ内のデザインをグループボックスを使うように変更した
    ↑項目設定タブの帳簿一覧に削除済みの帳簿が表示されるのを修正した
    ↑帳簿設定タブでの帳簿の追加で例外が発生していたのを修正した
    ↑帳簿設定タブでの帳簿の削除で所属する帳簿項目の有無に関わらず帳簿が削除できないのを修正した
    ＋帳簿設定タブでの帳簿情報の保存、帳簿-項目関係の変更を実装した(ただし削除は所属する帳簿項目がないときに限る)
2017/03/21
  MainWindow.xaml.cs
    ↑帳簿設定タブでの帳簿-項目関係の新規追加時に、画面表示が更新されていなかったのを修正した
    ＋項目設定タブでの種別追加、項目追加、削除、順序変更、及び項目情報の保存、項目-帳簿関係の変更を実装した(ただし削除は所属する帳簿項目がないときに限る)
    －設定タブの操作で、Transaction処理が必要な箇所に処理を追加した
2017/03/25
  MainWindow.xaml.cs
    －帳簿項目リストで複数選択に対応した(複数削除のみ可)
    －サマリーの選択に応じて帳簿項目リストをSELECTするようにした
2017/03/27
  NumericUpDown.xaml.cs
    －ValuePropertyがデフォルトで双方向になるようにした
  MainWindow.xaml.cs
    ↑帳簿設定の初期値、支払日の設定が保存できなかったのを修正した
    －帳簿種別を設定できるように変更した
    －支払元帳簿を設定できるように変更した
    －帳簿項目タブで選択した帳簿項目の金額の合計、平均を表示するように変更した
    －帳簿種別がクレジットカードでない場合に、支払日を設定できないように変更した
    －項目設定、帳簿設定の情報の保存時にメッセージを表示するように変更した
  ActionRegistrationWindow.xaml.cs
    －enumのViewModelでの保持方法を変更した
  ActionListRegistrationWindow.xaml.cs
    －enumのViewModelでの保持方法を変更した
  MoveRegistrationWindow.xaml.cs
    －enumのViewModelでの保持方法を変更した
    －クレジットカードであれば、移動の新規作成時に、支払元帳簿/支払日の設定に基づいた初期値にするように変更した
2017/03/31
  MainWindow.xaml.cs
    ↑帳簿項目タブで選択した帳簿項目の金額の合計、平均が誤っていたのを修正した
    ↑帳簿の追加/削除/ソート順変更/名称変更後、帳簿リストが更新されないのを修正した
    ↑帳簿項目が更新されると、サマリーの選択が無効になるのを修正した
    ↑帳簿項目の追加、編集後に対象の帳簿項目にフォーカスが当たっていなかったのを修正した
  NumericUpDown.xaml.cs
    －▲▼ボタンのタブストップを無効に変更した
  ActionRegistrationWindow.xaml.cs
    －新規追加時の「登録」と「続けて入力」のショートカットキーを逆に変更した
2017/04/01
  NumericUpDown.xaml.cs
    －▲▼ボタンのサイズ、文字を変更した
  MainWindow.xaml.cs
    ＋設定->その他に、pg_dump.exeパス、pg_restore.exeパス、バックアップ数、バックアップ先、開始月の設定を追加した
    ＋設定->その他に、データベース設定ができるような再起動をするボタンを追加した
    －帳簿項目タブで選択した帳簿項目の個数を表示するように変更した
    －帳簿項目タブで選択した帳簿項目の金額の合計、平均の表示位置を変更した
  DbSettingWindow.xaml.cs
    －pg_dump.exe、pg_restore.exeパスの指定ダイアログの初期値が現在の設定に依存するように変更した
2017/04/16
  DaoReader.cs
    －クエリの結果が複数レコードの場合に途中で処理を中断できるように変更した
  MainWindow.xaml.cs
    ↑データベース設定のための再起動ができないのを修正した
    －設定タブを別ウィンドウに変更した
  SettingsWindow.xaml.cs
    ＋MainWindowの設定タブを別ウィンドウとして追加した
  CsvComparisonWindow.xaml.cs
    ＋CSVデータを読み込んで、指定した帳簿の帳簿項目と照合する機能を追加した
2017/04/17
  CsvComparisonWindow.xaml.cs
    －読み込んだCSVファイル名が表示されるように変更した
    －CSVファイルを読み込んだときに、DataGridがなるべくMainWindowの帳簿項目と同じ順序になるように変更した
    －CSVファイルを読み込んだときに、DataGridの表示位置が一番上になるように変更した
    －DataGridのダブルクリック等で帳簿項目を編集できるように変更した(ただしMainWindowは表示が更新されない)
    －チェックボックスのチェックの状態がホバーで変わるのを、Ctrlキーが押されているときだけに変更した
    ＋帳簿項目と再比較できるようにボタンを追加した
  MainWindow.xaml.cs
    －CsvComparisonWindowで一致フラグが更新されたら帳簿一覧の表示を更新するように変更した
  ActionRegistrationWindow.xaml.cs
    －CSVデータとの照合結果を個別に変更できるように変更した
2017/04/22
  ActionRegistrationWindow.xaml.cs
    －回数が2以上の帳簿項目を変更したとき、既に作成済みの帳簿項目を変更するかどうかを選択できるように変更した
  CsvComparisonWindow.xaml.cs
    ＋一括して一致フラグを立てられるボタンを追加した
    ↑CSVファイルを読み込んだときに、DataGridの表示位置が一番上にならなかったのを修正した
2017/05/01
  全般
    －各WindowのDataContextの名称をWVMに変更した
  MainWindow.xaml.cs
    ↑年間一覧タブで表示年度を変更したときに、表示月に正しく反映されていなかったのを修正した
    ↑インポート時、インポート処理前にhst_shopのレコードがクリアされていなかったのを修正した
    －帳簿項目リストの再読込時、不要なスクロール位置の変更を行わないように変更した
    ＋年間の全項目の推移をグラフ表示する機能を追加した
  ActionListRegistrationWindow.xaml.cs
    －1列目のデータの日付がMainWindowで選択していた帳簿項目の日付になるように変更した
    －日付を変更するために必要なクリック回数が少なくなるように変更した
2017/05/02
  MainWindow.xaml.cs
    ＋選択している項目の推移をグラフ表示する機能を追加した
2017/05/13
  CsvComparisonWindow.xaml.cs
    ↑帳簿項目の日付に時刻データがあった場合に照合されないのを修正した
2017/05/20
  CsvComparisonWindow.xaml.cs
    －CSVデータ中の日付、支出、項目名のインデックスをDBから読み込むように変更した
  SettingsWindow.xaml.cs
    －CSVデータ読み込み時の日付、支出、項目名のインデックスを帳簿ごとに設定できるように変更した
2017/06/03
  NumericUpDown.xaml.cs
    －数字ボタン/BS入力時の動作が選択位置に依存するように変更した
  ActionListRegistrationWindow.xaml.cs
    －読み込み時に日付値データを2レコード表示するように変更した
2017/06/14
  SettingsWindow.xaml.cs
    －CSVデータ中の日付、支出、項目名のインデックス指定のテキストを変更した
2017/06/18
  MainWindow.xaml.cs
    ＋月間グラフタブを追加した
2017/06/25
  SettingsWindow.xaml.cs
    ↑店舗、備考削除後の表示更新時のソート順が逆になっているのを修正した
2017/07/09
  MainWindow.xaml.cs
    ＋帳簿項目のコピー機能を追加した
2017/07/16
  ActionListRegistrationWindow.xaml.cs
    －読み込み時に日付値データを2レコード表示せず、1レコードだけに変更した
  DateTimePicker.cs
    ↑マウスホイールイベントがハンドルしていなかったのを修正した
2017/08/15
  NumericUpDown.xaml.cs
    －数値入力部分を別コントロール(NumericInputButton.xaml.cs)に変更した
2017/08/16
  ActionListRegistrationWindow.xaml.cs
    ＋金額を数値入力ボタンで入力できる機能を追加した
2017/08/18
  NumericUpDown.xaml.cs
    ↑数値入力ボタンで入力できなくなっていたのを修正した
    －数値入力ボタンの位置を下側から右側に変更した
  ActionListRegistrationWindow.xaml.cs
    －数値入力ボタンの位置を下側から右側に変更した
  ActionRegistrationWindow.xaml.cs
    －「連動して編集」、「チェック済」を変更できないときは不可視に変更した
    －「続けて入力」できないときは不可視に変更した
    －複製時、「続けて入力」できないように変更した
  MainWindow.xaml.cs
    －メニューの「変更」を「編集」に変更した
2017/10/30
  App.xaml.cs
    ↑多重起動時、Mutexのリリースで例外が発生するのを修正した
  MainWindow.xaml.cs
    －グラフの表示テキストを変更した
    ↑表示している月が同年度の翌月以降の場合に今月ボタンが無効になっていたのを修正した
    ＋月間/年間残高グラフを表示する機能を追加した
2017/11/11
  MainWindow.xaml.cs
    －グラフのY軸の上限/下限を表示するデータの最大/最小に合わせて指定するように変更した
    －トラッカーの表示を変更した
  ActionListRegistrationWindow.xaml.cs
    －金額の非編集時の表示を編集時の表示に合わせるように変更した
2017/11/12
  App.xaml.cs
    ↑多重起動時、Mutexのリリースで例外が発生するのを修正した
  MainWindow.xaml.cs
    ↑グラフのデータが負ですべて同じ値の場合に個別グラフが例外で表示できなくなるのを修正した
    ↑グラフのデータの上限/下限が共に0の場合にグラフが例外で表示できなくなるのを修正した
    －グラフのY軸の上限/下限にマージンを設けるように変更した
  ActionListRegistrationWindow.xaml.cs
    －ウィンドウを最小化/最大化できないように変更した
  ActionRegistrationWindow.xaml.cs
    －ウィンドウを最小化/最大化できないように変更した
  CsvComparisonWindow.xaml.cs
    －ウィンドウを最小化/最大化できないように変更した
  DbSettingWindow.xaml.cs
    －ウィンドウを最小化/最大化できないように変更した
  MoveRegistrationWindow.xaml.cs
    －ウィンドウを最小化/最大化できないように変更した
  SettingWindow.xaml.cs
    －ウィンドウを最小化/最大化できないように変更した
  VersionWindow.xaml.cs
    ＋バージョン情報の表示ウィンドウを追加した

---------------------------------------------------------------------------------------------------------------------
凡例：＋追加 －変更 ×削除 ↑バグ修正
---------------------------------------------------------------------------------------------------------------------
TODO:
  帳簿でカレンダーを表示して月が選択できるようにする

バグ：
  -

修正案：
  一定額を下回ったら通知する
  先月、翌月を連続でクリックしたときの動作の改善
    読み込み処理をタスク化して、クリック時に中断する
  帳簿項目数が多くなると帳簿切替が遅くなるのを解消する
  金額の入力欄で和差積の演算ができるようにする
  処理の高速化
  記帳風月よりも新しいデータがあった場合に警告する